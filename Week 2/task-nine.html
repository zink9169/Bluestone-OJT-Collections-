<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Task Nine</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">

    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
    </style>
</head>

<body>

<div class="row p-3">
    <div class="col-4">

        <div class="mb-3">
            <select class="form-select" id="product">
                <option value="">Product</option>
            </select>
        </div>

        <div class="row">
            <div class="mb-3 col">
                <label class="form-label">Quantity</label>
                <input type="number" class="form-control" id="qty" min="1" value="1">
            </div>

            <div class="mb-3 col">
                <label class="form-label">Discount (%)</label>
                <input type="number" class="form-control" id="discount" min="0" max="100" value="0">
            </div>
        </div>

        <button class="btn btn-primary w-100" id="submit">Add</button>
    </div>

    <div class="col-8">
        <table class="table table-hover">
            <thead>
                <tr>
                    <th>Product</th>
                    <th>Quantity</th>
                    <th>Price</th>
                    <th>Discount</th>
                    <th>Total</th>
                </tr>
            </thead>

            <tbody id="body"></tbody>

            <tfoot>
                <tr>
                    <td colspan="4" class="text-end fw-bold">Grand Total</td>
                    <td id="grandTotal">0</td>
                </tr>
            </tfoot>
        </table>
    </div>
</div>

<script>
    const products = [
        { name: "Laptop", price: 1000 },
        { name: "Mouse", price: 50 },
        { name: "Keyboard", price: 100 },
        { name: "Monitor", price: 300 }
    ];

    const productSelect = document.getElementById('product');
    const qtyInput = document.getElementById('qty');
    const discountInput = document.getElementById('discount');
    const addButton = document.getElementById('submit');
    const tableBody = document.getElementById('body');
    const grandTotalCell = document.getElementById('grandTotal');

    products.forEach(p => {
        const option = document.createElement('option');
        option.value = p.name;
        option.textContent = p.name;
        productSelect.appendChild(option);
    });

    function calculateTotal(price, qty, discount) {
        const subtotal = price * qty;
        return subtotal - (subtotal * discount / 100);
    }

    function updateGrandTotal() {
        let total = 0;

        tableBody.querySelectorAll('tr').forEach(row => {
            total += Number(row.cells[4].textContent);
        });

        grandTotalCell.textContent = total.toFixed(0);
    }

    addButton.addEventListener('click', () => {
        const productName = productSelect.value;
        const qty = Number(qtyInput.value);
        const discount = Number(discountInput.value);

        if (!productName || qty <= 0 || discount < 0 || discount > 100) {
            alert("Please enter valid values");
            return;
        }

        const product = products.find(p => p.name === productName);
        const total = calculateTotal(product.price, qty, discount);

        const row = tableBody.insertRow();
        row.insertCell(0).textContent = productName;
        row.insertCell(1).textContent = qty;
        row.insertCell(2).textContent = product.price;
        row.insertCell(3).textContent = discount + "%";
        row.insertCell(4).textContent = total.toFixed(0);

        updateGrandTotal();

        productSelect.selectedIndex = 0;
        qtyInput.value = 1;
        discountInput.value = 0;
    });
</script>

</body>
</html>
